<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Научка</title>
	<link href="css/test.css" rel="stylesheet">
	<link rel="shortcut icon" href="https://thumbs.uloz.to/7/4/d/74dda85ec36d883bb4c66a04ae6e5586.640x360.jpg">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body>
    <div id="app" style="display:flex; flex-direction:column; align-items: center;">
        <!--<pre>{{ $data | json }}</pre>-->
		<!-- <h1>{{ message }}</h1>
        <input type="text" v-model="message">
		
		<button v-on:click="addExpert">Добавить эксперта</button>
		<button v-on:click="delExpert">Удалить эксперта</button>
		-->
		<h1>Ахуенный проект</h1>
		{{ globalSequences }}
		<p>Эксперты: <input v-if="!kakaha" type="range" min="1" v-bind:max="vertexes" max-range="vertexes" v-model.number="experts"></input> {{ experts }}</p>
		
		<p>Вершины: <input v-if="!kakaha" type="range" min="1" max="11" v-model.number="vertexes"></input> {{ vertexes }}</p>

		<button v-on:click="makeExperts" v-if="!kakaha" style="margin-bottom:20px">Построить отряд экспертов</button>

		<!--<div ></div>-->
		<div id="expertsList" style="display:flex; flex-direction: row;">
			<!--<counter></counter>-->
			<counter v-if="kakaha" v-for="(c, index) in $root.experts" v-bind:pushsequence="pushsequence" v-bind:i="index" v-bind:vertexes="vertexes"></counter>
		</div>
		<!-- <counter></counter>
		<expert></expert> -->
	</div>

	<template id="counterTemplate">
		
		<div style="display:flex; align-items: center; justify-content: space-around; flex-direction:column; border:solid 1px black">
			<!--{{ sequence }} {{ vertexes }}-->
			<!-- <p><button v-on:click="count++">Счётчик кликов — {{ count }} {{ $root.message }}</button></p> -->
			<div style="display:flex; align-items: center; justify-content: center;"><i style="font-size:50px" class="material-icons">person</i></div>
			<transition-group name="flip-list" style="padding:10px" tag="ul">
				<li style="list-style-type:none;display:flex;flex-direction:center"
					v-for="(n, index) in sequence" v-bind:key="n">
					{{ n }}
					<button v-if="index > 0" style="border-radius:50%" v-on:click="changePos(index, 'up')" class="material-icons">keyboard_arrow_up</button>
					<button v-else style="visibility:hidden" class="material-icons">keyboard_arrow_up</button>
					<button v-if="index < vertexes-1" style="border-radius:50%" v-on:click="changePos(index, 'down')" class="material-icons">keyboard_arrow_down</button>
				</li>
				<!--<li style="list-style-type:none;display:flex;flex-direction:center"
					v-for="(n, index) in vertexes">
					{{ n }}
					<button v-if="index>0" style="border-radius:50%" class="material-icons">keyboard_arrow_up</button>
					<button v-else style="visibility:hidden" class="material-icons">keyboard_arrow_up</button>
					<button v-if="index<vertexes-1" style="border-radius:50%" class="material-icons">keyboard_arrow_down</button>
				</li> -->
			</transition-group>
		</div>
	</template>
	
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>

    <script>
		Vue.component('counter', {
			data: function() {
				return {
					count: 0,
					poss: [],
					sequence: [],
				}
			},
			props: ['vertexes', 'i', 'pushsequence'],
			<!-- computed: {
			<!--	pos: function() {
			<!--		return Array.from({length: this.vertexes}, (v, k) => k+1);
			<!--	}
			<!--},
			methods: {
				changePos: function(index, direction) {
					this.sequence.push();
					if (direction === 'up') {
						[this.sequence[index], this.sequence[index-1]] = [this.sequence[index-1], this.sequence[index]];
					} else {
						[this.sequence[index], this.sequence[index+1]] = [this.sequence[index+1], this.sequence[index]];
					}
				}
			},
			mounted: function() {
				this.sequence = Array.from({length: this.vertexes}, (v, k) => k+1);
			},
			updated: function() {
				this.pushsequence(this.i, this.sequence);
			},
			template: '#counterTemplate'
		});

		
        new Vue({
            el: "#app",
            data: {
                message: "Hello world",
				vertexes: 3,
				experts: 3,
				globalSequences: {},
				kakaha: false,
            },
			methods: {
				addExpert: function() {
					var newExpEl = document.createElement('div');
					newExpEl.innerHTML = 'Я эксперт!';
					expertsList.appendChild(newExpEl);
					this.eee.push({el: newExpEl, vert: [1,2,3]}, );
				},
				delExpert: function() {
					thisExpert = this.eee.pop();
					if (thisExpert !== undefined) {
						thisExpert.el.remove();
					} else {
						alert("Нет экспертов");
					}
					
				},
				genArray: function() {
					return Array.from({length: this.vertexes}, (v, k) => k+1);
				},
				makeExperts: function() {
					this.kakaha = true;
					console.log(123);
					var newExpEl = document.createElement('component');
					newExpEl.setAttribute('is', 'counter	');
					expertsList.appendChild(newExpEl);
					this.eee.push({el: newExpEl, vert: [1,2,3]}, );
				},
				pushsequence: function(index, sequence) {
					this.globalSequences[index](sequence);
				}
			}
        })
    </script>
</body>
</html>
